# Reverso de contrato (T_KMIC_MICROCREDIT_CONTRACT)
update.microcredit.contract=db1; \
UPDATE T_KMIC_MICROCREDIT_CONTRACT SET  \
GF_OVERDUE_BALANCE_AMOUNT = GF_OVERDUE_BALANCE_AMOUNT + :amount, \
G_MCRCR_CONTRACT_STATUS_TYPE = 'UNPAID', \
GF_AUDIT_DATE = :date, \
GF_USER_AUDIT_ID = :userAudit \
WHERE GF_CONTRACT_ID = :contractId;

# Reverso de amortización disposición (T_KMIC_MCRCR_DSPN_AMORT)
update.mcecr.amortization=db1; \
UPDATE T_KMIC_MCRCR_DSPN_AMORT SET \
GF_CAP_AMORTIZ_INSTLMNT_AMOUNT = GF_CAP_AMORTIZ_INSTLMNT_AMOUNT - :amount, \
G_MCRCR_AMORT_STATUS_TYPE = 'UNPAID', \
GF_USER_AUDIT_ID = :userAudit, \
GF_AUDIT_DATE = :date \
WHERE G_CONTRACT_ID = :contractId \
AND GF_OPERATION_PAGE_ID = :microloanId \
AND GF_ITEM_SETTLEMENT_DATE = :installmentDate;

# Reverso de condición de amortización (T_KMIC_AMORTIZATION_CONDITION)
update.amortization.condition=db1; \
UPDATE T_KMIC_AMORTIZATION_CONDITION SET \
GF_APPLIED_ECON_COND_AMOUNT = GF_APPLIED_ECON_COND_AMOUNT - :amount, \
GF_RECOVERED_TAX_AMOUNT = 0, \
G_MCRCR_AMORT_STATUS_TYPE = 'UNPAID', \
GF_USER_AUDIT_ID = :userAudit, \
GF_AUDIT_DATE = :date \
WHERE G_CONTRACT_ID = :contractId \
AND GF_OPERATION_PAGE_ID = :microloanId \
AND GF_ITEM_SETTLEMENT_DATE = :installmentDate;

# Reverso de condiciones de contrato (T_KMIC_CONTRACT_CONDITION)
update.contract.condition=db1; \
UPDATE T_KMIC_CONTRACT_CONDITION SET \
GF_APPLIED_ECON_COND_AMOUNT = GF_APPLIED_ECON_COND_AMOUNT - :amount, \
GF_RECOVERED_TAX_AMOUNT = 0, \
G_MCRCR_CONT_COND_STATUS_TYPE = 'UNPAID', \
GF_USER_AUDIT_ID = :userAudit, \
GF_AUDIT_DATE = :date \
WHERE G_CONTRACT_ID = :contractId \
AND GF_OPERATION_PAGE_ID = :microloanId \
AND GF_ITEM_SETTLEMENT_DATE = :installmentDate \
AND GF_SEQUENCE_ID = :sequenceId;

# Reverso de disposición (T_KMIC_MCRCR_CONT_DISPOSITION)
update.disposition=db1; \
UPDATE T_KMIC_MCRCR_CONT_DISPOSITION SET \
GF_CR_RECOVERED_TOTAL_AMOUNT = GF_CR_RECOVERED_TOTAL_AMOUNT - :amount, \
GF_REPAYMENT_OUTSTD_AMOUNT = GF_REPAYMENT_OUTSTD_AMOUNT + :amount, \
G_MCRCR_DSPN_STATUS_TYPE = 'UNPAID', \
GF_USER_AUDIT_ID = :userAudit, \
GF_AUDIT_DATE = :date \
WHERE G_CONTRACT_ID = :contractId \
AND GF_OPERATION_PAGE_ID = :microloanId;
